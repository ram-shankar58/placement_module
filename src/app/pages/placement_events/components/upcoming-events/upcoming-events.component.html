<div *ngIf="eventsSandbox.placementEventsListLoading$ | async as isLoading">
    <div class="overall_div" *ngIf="isLoading">
        <app-skeletonloader *ngFor="let n of skeletonCount"></app-skeletonloader>
    </div>
</div>

<!-- no-placement-events.component.html -->
<div class="event-card empty-state" *ngIf="EventsList.length === 0 && !(eventsSandbox.placementEventsListLoading$ | async)">
  <div class="icon-wrapper">
    <img src="assets/icons/archive.svg" alt="No Events" class="box-icon" />
  </div>
  <h2 class="title">No Event Created</h2>
  <p class="description">You haven’t added any event yet. Start by creating one to notify students.</p>
  <div class="actions">
    <button class="btn-primary" (click)="toggleSidebar()">
      <svg class="btn-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
      </svg>
      Add a New Event
    </button>
    <span class="or-text">or</span>
    <a class="upload-link">
      <img src="assets/icons/Upload.svg" alt="Upload Icon" class="btn-icon" />
      Upload bulk Event details
    </a>
  </div>
</div>


<div class="overall_div" >
  <div class="add_n_sort_event" style="margin-left: 27px; margin-right: 20px; padding-bottom: 0" *ngIf="EventsList.length !== 0 && !(eventsSandbox.placementEventsListLoading$ | async)">
    <div>
      <button class="add-btn" (click)="toggleSidebar()">
        <img src="assets/icons/add-icon.png"> Add a New Event
      </button>
    </div>
    <div class="addUpload">
      <span class="or-text" style="margin-top: 5px; margin-left:0px">Or</span>
      <a class="upload-link">
        <!-- (click)="uploadBulkEventDetails()" -->
        <img src="assets/icons/Upload.svg" alt="Upload Icon" class="btn-icon" />
        Upload bulk Company details
      </a>
    </div>
    <div style="flex:1;">
      <div class="search-filter-sort-group" style="display: flex; align-items: center; gap: 16px; justify-content: flex-end;">
        <div class="search-input-wrapper">
          <img src="assets/icons/search-icon.png" alt="Search" class="search-input-icon" />
          <input type="text" class="search-box event-search-input" [(ngModel)]="eventSearch" placeholder="Search" />
        </div>
        <button class="icon-button" (click)="toggleFilterPopup()">
          <img src="assets/icons/filter-icon.png"> Filter
        </button>
        <!-- Include sort here -->
        <div class="sort-dropdown-wrapper" style="position: relative; display: inline-block;">
          <button class="icon-button" (click)="sortDropdownOpen = !sortDropdownOpen">
            <img src="assets/icons/sort-icon.png"> Sort
            </button>
          <div class="sort-dropdown" *ngIf="sortDropdownOpen" style="position: absolute; z-index: 10; background: #fff; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); min-width: 160px;">
            <div class="sort-option" [class.selected]="sortOption === 'recent'" (click)="setSort('recent')">Recently added</div>
            <div class="sort-option" [class.selected]="sortOption === 'name'" (click)="setSort('name')">Event Name</div>
            <div class="sort-option" [class.selected]="sortOption === 'date'" (click)="setSort('date')">Event Date</div>
            <div class="sort-option" [class.selected]="sortOption === 'type'" (click)="setSort('type')">Event Type</div>
          </div>
        </div>
      </div>
    </div>
    <div class="filter-dropdown" *ngIf="isFilterVisible" clickOutside>
      <div class="filter-popup">
       
      <div class="filter-header">
        <span>Filter Events</span>
        <span> <button class="close-btn" style="float:right;  right:0; padding:0; margin:0; background-color: transparent;" (click)="closeFilterPopup()"><img src='/assets/icons/x.png'style="background-color: transparent;"></button></span>
        
      </div>
      <!-- Event Type -->
      <div class="filter-main">
      <div class="filter-section">
        <label>Event Type</label>
        <div class="event-type-options">
          <label>
            <input type="checkbox" value="On-campus" (change)="onFilterModeChange($event)" [checked]="filterModes.includes('On-campus')" /> On-campus
          </label>
          <label>
            <input type="checkbox" value="Off-campus" (change)="onFilterModeChange($event)" [checked]="filterModes.includes('Off-campus')" /> Off-campus
          </label>
          <label>
            <input type="checkbox" value="Pool" (change)="onFilterModeChange($event)" [checked]="filterModes.includes('Pool')" /> Pool
          </label>
          <label>
            <input type="checkbox" value="Virtual" (change)="onFilterModeChange($event)" [checked]="filterModes.includes('Virtual')" /> Virtual
          </label>
        </div>
      </div>
      <!-- Search -->
      <div class="filter-section container " style="padding:0px; margin:0px;">
        <label>Search Company</label>
        <input
          type="text"
          placeholder="Search or type to add"
          [(ngModel)]="filterCompanySearch"
          (input)="onFilterCompanySearch()"
          (keydown.enter)="addCompanyFromFilter()"
          class="company-search-input"
        />
        <div class="company-search-dropdown" *ngIf="filteredFilterCompanies.length && showFilterCompanyDropdown">
          <div class="company-search-option" *ngFor="let company of filteredFilterCompanies" (click)="selectCompanyFromFilter(company)">
            <img [src]="company.logo" alt="{{ company.companyName }}" class="company-logo-mini" />
            {{ company.companyName }}
          </div>
        </div>
        <div class="selected-companies">
          <div class="selected-company-chip" *ngFor="let comp of selectedFilterCompanies">
            <img [src]="comp.logo" alt="{{ comp.companyName }}" class="company-logo-mini" />
            {{ comp.companyName }}
            <span class="remove-chip" (click)="removeFilterCompany(comp)">×</span>
          </div>
        </div>
      </div>
      <!-- Eligible Courses -->
      <div class="filter-section">
        <label>Eligible courses</label>
        <div class="custom-chip-dropdown-wrapper">
          <div class="chip-input-area" (click)="toggleFilterCourseDropdown()">
            <ng-container *ngIf="filterCourses.length; else placeholder">
              <span class="chip" *ngFor="let course of filterCourses">
                {{ course }}
                <span class="chip-remove" (click)="removeFilterCourse(course); $event.stopPropagation()">&#10005;</span>
              </span>
            </ng-container>
            <ng-template #placeholder>
              <span class="chip-placeholder">Select eligible courses</span>
            </ng-template>
            <span class="dropdown-arrow">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 8L10 12L14 8" stroke="#222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
          </div>
          <div class="custom-dropdown-list" *ngIf="filterCourseDropdownOpen">
            <label *ngFor="let course of coursesList" class="dropdown-option">
              <input
                type="checkbox"
                [value]="course"
                (change)="onFilterCourseChange($event)"
                [checked]="filterCourses.includes(course)"
              />
              {{ course }}
            </label>
          </div>
        </div>
      </div>
      <!-- Date and Time in same row -->
      <div class="filter-section dual-field">
        <div style="flex: 1;">
          <label>Event Date</label>
          <input
            ngbDatepicker
            placeholder="From Date"
            [(ngModel)]="filterFromDate"
            #fromDatePicker="ngbDatepicker"
            (click)="fromDatePicker.toggle()"
            class="form-control"
            style="background: url('assets/icons/calendar.png') no-repeat right 10px center/20px 20px; padding-right: 36px;"
          />
        </div>
        <div style="flex: 1;">
          <label>To Date</label>
          <input
            ngbDatepicker
            placeholder="To Date"
            [(ngModel)]="filterToDate"
            #toDatePicker="ngbDatepicker"
            (click)="toDatePicker.toggle()"
            class="form-control"
            style="background: url('assets/icons/calendar.png') no-repeat right 10px center/20px 20px; padding-right: 36px;"
          />
            
          
        </div>
      </div>
    
    </div>
      <!-- Footer -->
      <div class="filter-footer">
        <a class="clear-btn" (click)="resetFilters()">Clear</a>
        <button class="apply-btn" (click)="applyFilters()">Apply</button>
      </div>
      </div>
    </div>
  </div>
  <div class="sidebar" [class.active]="issidebarvisible">
    <form [formGroup]="addEventForm">
      <div class="sidebar-scrollable">
        <div class="sidebar-header">
          <button class="close-btn" type="button" (click)="cancel()">&#10005;</button>
          <h6 style="font-size: 17px;">{{ isUpdateMode? 'Update Event' : 'Add a new Event' }}</h6>
          <p style="font-size: 12px;">Detail out the placement event with the required fields</p>
        </div>
        <!-- Sidebar Content -->
        <div class="sidebar-content">
          <div class="container">
            <div class="step-header">
              <div class="step-icon">1</div>
              <h6>Event Basics</h6>
            </div>
            <div class="sidebar-sub-section">
              <label>Event title<span style="color: red;">*</span></label>
              <input type="text" placeholder="Enter a title" formControlName="eventTitle">
              <div class="error" *ngIf="submitted && addEventForm.get('eventTitle')?.invalid">
                Event title is required.
              </div>
            </div>
            <div class="sidebar-sub-section">
              <label>Write about the event</label>
              <textarea placeholder="Enter a description..." formControlName="aboutEvent"></textarea>
            </div>
            <div class="mode-options">
              <label 
                class="mode-box yellow" 
                [class.selected]="addEventForm.get('modeOfEvent')?.value === 'On-campus'"
                (click)="addEventForm.get('modeOfEvent')?.setValue('On-campus')"
              >
                <span>
                  <input type="radio" name="modeOfEvent" value="On-campus" class="radioinput" /><strong>On-campus</strong>
                </span>
              </label>
              <label 
                class="mode-box green" 
                [class.selected]="addEventForm.get('modeOfEvent')?.value === 'Off-campus'"
                (click)="addEventForm.get('modeOfEvent')?.setValue('Off-campus')"
              >
                <span>
                  <input type="radio" name="modeOfEvent" value="Off-campus" class="radioinput" /><strong>Off-campus</strong>
                </span>
              </label>
              <label 
                class="mode-box blue" 
                [class.selected]="addEventForm.get('modeOfEvent')?.value === 'Pool'"
                (click)="addEventForm.get('modeOfEvent')?.setValue('Pool')"
              >
                <span>
                  <input type="radio" name="modeOfEvent" value="Pool" class="radioinput" /><strong>Pool</strong>
                </span>
              </label>
              <label 
                class="mode-box purple" 
                [class.selected]="addEventForm.get('modeOfEvent')?.value === 'Virtual'"
                (click)="addEventForm.get('modeOfEvent')?.setValue('Virtual')"
              >
                <span>
                  <input type="radio" name="modeOfEvent" value="Virtual" class="radioinput" /><strong>Virtual</strong>
                </span>
              </label>
            </div>
          </div>
          <!-- Schedule -->
          <div class="container">
            <div class="step-header">
              <div class="step-icon">2</div>
              <h6>Schedule</h6>
            </div>
            <div class="dual-field">
              <div class="sidebar-sub-section" style="flex: 1;">
                <label>Event date as scheduled<span style="color: red;"> *</span></label>
                <input
                  class="form-control"
                  placeholder=""
                  name="dp"
                  ngbDatepicker
                  formControlName="eventDate"
                  [ngClass]="{ 'is-invalid': submitted && addEventForm.controls['eventDate'].errors }"
                  #d="ngbDatepicker"
                  (click)="d.toggle()"
                  style="background: url('assets/icons/calendar.png') no-repeat right 10px center/20px 20px; padding-right: 36px; cursor: pointer;"
                />
                <div *ngIf="submitted && addEventForm.controls['eventDate'].errors" class="invalid-feedback d-block">
                  Event date is required.
                </div>
              </div>
              <div class="sidebar-sub-section" style="flex: 1;">
                <label>Event start time</label>
                <div class="input-icon-right">
                  <input
                    type="text"
                    placeholder=""
                    formControlName="eventTime"
                    readonly
                    (click)="showClock = !showClock"
                    style="background: url('assets/icons/clock.png') no-repeat right 10px center/20px 20px; padding-right: 36px; cursor:pointer;"
                  />
                  <div *ngIf="showClock" class="timepicker-container">
                    <app-custom-timepicker (timeSelected)="onTimeSelected($event)"></app-custom-timepicker>
                  </div>
                  <div class="error" *ngIf="submitted && addEventForm.get('eventTime')?.hasError('invalidTime')">
                    Please enter a valid time in HH:MM (e.g., 23:45).
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="sidebar-sub-section">
              <label>Venue or platform</label>
              <input type="text" placeholder="Type a location" formControlName="venue"/>
            </div>
          </div>
          <!-- Associated Companies -->
          <div class="container">
            <div class="step-header">
              <div class="step-icon">3</div>
              <h6>Associated Companies</h6>
            </div>
            <div class="sidebar-sub-section">
              <label>Company detail</label>
              <input
                type="text"
                placeholder="Search or type to add"
                [(ngModel)]="companySearch"
                (input)="onCompanySearch()"
                (keydown.enter)="addCompanyFromInput()"
                [ngModelOptions]="{standalone: true}"
                class="company-search-input"
                autocomplete="off"
              />
              <div class="company-search-dropdown" *ngIf="filteredCompanies?.length && showCompanyDropdown">
                <div
                  class="company-search-option"
                  *ngFor="let company of filteredCompanies"
                  (click)="selectCompany(company)" style="cursor: pointer;"
                >
                  <img [src]="company.logo" alt="{{company.companyName}}" class="company-logo-mini" />
                  {{ company.companyName }}
                </div>
              </div>
              <small *ngIf="!filteredCompanies?.length && companySearch && showCompanyDropdown">
                No companies found. Press Enter to add "{{ companySearch }}"
              </small>
              <div class="selected-companies">
                <div class="selected-company-chip" *ngFor="let comp of selectedCompanies">
                  <img [src]="comp.logo" alt="{{comp.companyName}}" class="company-logo-mini" />
                  {{ comp.companyName }}
                  <span class="remove-chip" (click)="removeCompany(comp)">×</span>
                </div>
              </div>
            </div>
          </div>
          <!--  Eligibility -->
          <div class="container">
            <div class="step-header">
              <div class="step-icon">4</div>
              <h6>Eligibility</h6>
            </div>
            <div class="dual-field">
              <div class="sidebar-sub-section">
                <label>Eligible Courses</label>
                <div class="dropdown-wrapper" (clickOutside)="closeDropdown()">
                  <button type="button" class="custom-dropdown-btn" (click)="toggleDropdown()">
                    {{ selectedCourses.length ? selectedCourses.join(', ') : 'Select eligible courses' }}
                    <i class="fa fa-caret-down" style="position: relative; float:right;" ></i>
                  </button>
                  <div class="custom-dropdown-list" *ngIf="dropdownOpen">
                    <label *ngFor="let course of coursesList" class="dropdown-option">
                      <input
                        type="checkbox"
                        [value]="course"
                        (change)="onCourseCheckboxChange(course, $event)"
                        [checked]="selectedCourses.includes(course)"
                      />
                      {{ course }}
                    </label>
                  </div>
                </div>
              </div>
              <div>
                <label>Eligibility criteria</label>
                <input type="text" placeholder="Enter criteria" formControlName="eligibleCriteria" />
              </div>
            </div>
          </div>
          <!-- Selection process -->
          <div class="container">
            <div class="step-header">
              <div class="step-icon">5</div>
              <h6>Selection process</h6>
            </div>
            <div style="display: flex;">
              <input type="checkbox" style="margin-left: 15px;" [checked]="addEventForm.get('selectionProcess')?.value?.includes('Aptitude test')" (change)="onRoundCheckboxChange($event, 'Aptitude test')" /> Aptitude test
              <input type="checkbox" style="margin-left: 15px;" [checked]="addEventForm.get('selectionProcess')?.value?.includes('Technical interview')" (change)="onRoundCheckboxChange($event, 'Technical interview')" /> Technical interview
              <input type="checkbox" style="margin-left: 15px;" [checked]="addEventForm.get('selectionProcess')?.value?.includes('HR interview')" (change)="onRoundCheckboxChange($event, 'HR interview')" /> HR interview
            </div>
          </div>
        </div>
        <div class="sidebar-footer">
          <button class="cancel_btn" type="button" (click)="cancel()">Cancel</button>
          <button class="submit_btn"
            type="submit"
            [disabled]="addEventForm.invalid"
            [ngClass]="{ 'active': addEventForm.valid }"
            (click)="addEvent()">{{ isUpdateMode ? 'Update Event' : 'Add Event'}}
          </button>
        </div>
      </div>
    </form>
  </div>
  <!-- upcoming events table -->
  <div class="events-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; margin-top:0; padding-top:0; margin-left: 30px; margin-right: 30px; align-items: stretch;" *ngIf="EventsList.length !== 0 && !(eventsSandbox.placementEventsListLoading$ | async)">
    <div class="events-card" style="height: 180px; width: 100%; max-width: 100%; display: flex; flex-direction: column;" *ngFor="let event of displayedEvents">
      <div class="event-card" style="flex: 1 1 auto; display: flex; flex-direction: column;">
        <!-- Settings Dropdown -->
        <div class="event-settings">
          <button class="settings-btn" (click)="toggleSettings(event)">
            <img src="assets/icons/settings-icon.png">
          </button>
          <div class="settings-dropdown" *ngIf="event.showSettings">
            <div class="settings-option" (click)="onUpdateEvent(event)" >Update Event Details</div>
            <div class="settings-option" (click)="onCopyEvent(event)">Copy as New Event</div>
            <div class="settings-option" [class.danger]="true" (click)="onDeleteEvent(event)">Cancel/Delete Event</div>
          </div>
        </div>
        <div class="header" (click)="openEventDetails(event)" style="cursor: pointer;">
          <div style="display: flex; align-items: flex-start;">
            <div style="display: flex; flex-direction: column; align-items: center; min-width: 48px;">
              <div style="width: 38px; height: 38px; border-radius: 50%; background: #2FA8FF; color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.92em; margin-bottom: 2px;">
                <div style="font-size: 0.98em; line-height: 1; font-weight: 400;">{{ event.eventDate | date: 'dd' }}</div>
                <div style="font-size: 0.78em; line-height: 1; font-weight: 400;">{{ event.eventDate | date: 'MMM' }}</div>
              </div>
              <span style="margin-top: 4px; font-size: 10px; color: #666; font-weight: 500; text-align: center; line-height: 1; letter-spacing: 0.2px;">
                {{ (event.eventTime | timeAmPm).slice(0, -2).trim() }}
                <span style="display: block; font-size: 10px; color: #666; font-weight: 500; text-align: center; line-height: 1; margin-top: 0; letter-spacing: 0.2px; padding: 0;">
                  {{ (event.eventTime | timeAmPm).slice(-2) }}
                </span>
              </span>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: flex-start; margin-left: 12px; margin-top: 2px;">
              <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 0;">
                <div style="color: #A0A0A0; font-size: 10px; letter-spacing: 0.5px; line-height: 1; margin-top:2px; font-weight: 400;">EVT{{ event.id }}</div>
                <div style="font-size: 18px; font-weight: 700; color: #127AFF; line-height: 1.13; margin-top: 2px;">{{ event.eventTitle }}</div>
              </div>
              <div style="height: 10px;"></div>
              <div style="display: flex; align-items: flex-end; gap: 6px; min-height: 18px; margin-top: 0px;">
                <span
                  class="badge eventviewbadge"
                  [ngClass]="{
                    'on-campus': event.modeOfEvent === 'On-campus',
                    'off-campus': event.modeOfEvent === 'Off-campus',
                    'pool': event.modeOfEvent === 'Pool',
                    'virtual': event.modeOfEvent === 'Virtual'
                  }"
                  *ngIf="event.modeOfEvent?.length"
                  style="font-size: 10px; font-weight: 600; padding: 2px 9px; border-radius: 12px;"
                >
                  {{ event.modeOfEvent }}
                </span>
                <img src="assets/icons/location_on.png" *ngIf="event.venue?.length" style="width: 10px; height: 12px; vertical-align: middle;">
                <span class="venue" *ngIf="event.venue?.length" style="font-size: 10px; color: #222;">{{ event.venue }}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="companies" *ngIf="event.companyDetails?.length" >
          <ng-container *ngFor="let company of event.companyDetails; let i = index">
            <ng-container *ngIf=" i < 4">
              <img [src]="company.logo" alt="{{company.companyName}} logo" class="company-logo" />
              <span style="color:#007AFF"> {{company.companyName}} </span>
            </ng-container>
            <span *ngIf="i === 4" class="more-companies" style="color: #007AFF;">+ {{ event.companyDetails.length - i }} more </span>
          </ng-container>
        </div>
        <div class="course-eligibility" *ngIf="getFilteredEligibleCourses(event).length || event.eligibleCriteria">
          <div *ngIf="getFilteredEligibleCourses(event).length">
            <label>Eligible Courses</label>
            <div *ngIf="getFilteredEligibleCourses(event).length">{{ event.eligibleCourses?.join(', ') || '' }}</div>
          </div>
          <div *ngIf="event.eligibleCriteria">
            <label>Eligibility Criteria</label>
            <div *ngIf="event.eligibleCriteria">{{ event.eligibleCriteria }}</div>
          </div>
        </div>
        <!--
        <div class="footer">
          <div class="status" *ngIf="event.status === 'not_sent'">
            <span class="warning">⚠️ Event not sent to students yet</span>
          </div>
          <button class="shortlist-btn" *ngIf="event.status === 'not_sent'; else showShortlist">Shortlist Students</button>
          <ng-template #showShortlist>
            <span>12 students shortlisted</span>
          </ng-template>
        </div>
        -->
      </div>
    </div>
  </div>
  <div class="modal-overlay" *ngIf="selectedEvent" (click)="closeEventDetails()">
    <div class="modal" style="width: 480px; max-width: 95vw; height:auto; max-height: 420px; min-width: 320px; padding: 0 0 0 0; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.18); overflow-y: auto;" (click)="$event.stopPropagation()">
      <div class="modal-header" style="padding: 10px 18px 10px 18px; min-height: 38px; max-height: 38px; background: #F2F2F7; display: flex; align-items: center; justify-content: space-between;">
        <h3 style="font-size: 16px; font-weight: 600; margin: 0; line-height: 1.2;">Event Details</h3>
        <button class="close-btn" (click)="closeEventDetails()" style="background: none; border: none; font-size: 20px; cursor: pointer; height: 28px; width: 28px; padding: 0; margin: 0; display: flex; align-items: center; justify-content: center;"><img src="assets/icons/x.png" style="width: 22px; height: 22px;" /> </button>
      </div>
      <div class="modal-section" style="padding: 10px 18px 6px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Event Title</label>
        <div class="event-title" style="font-size: 12px; font-weight: 700; color: #22223b;">
          {{ selectedEvent.eventTitle }}
          <div class="meta" style="font-size: 10px; font-weight: 400; color: #222; margin-top: 2px;">
            {{ selectedEvent.eventDate | date: 'dd MMM yyyy' }} {{ selectedEvent.eventTime | timeAmPm}}
            <span
              class="badge eventviewbadge" *ngIf="selectedEvent.modeOfEvent?.length"
              [ngClass]="{
                'on-campus': selectedEvent.modeOfEvent?.toLowerCase() === 'on-campus',
                'off-campus': selectedEvent.modeOfEvent?.toLowerCase() === 'off-campus',
                'pool': selectedEvent.modeOfEvent?.toLowerCase() === 'pool',
                'virtual': selectedEvent.modeOfEvent?.toLowerCase() === 'virtual'
              }"
              style="font-size: 10px; font-weight: 400; color: #222; margin-left: 8px; padding: 2px 6px; border-radius: 6px;"
            >
              {{ selectedEvent.modeOfEvent }}
            </span>
            <img src="assets/icons/location_on.png" *ngIf="selectedEvent.venue?.length" style="width: 10px; height: 12px; vertical-align: middle; margin-left: 6px;">
            <span *ngIf="selectedEvent.venue?.length" style="font-size: 10px; color: #222; margin-left: 2px;">{{ selectedEvent.venue }}</span>
          </div>
        </div>
      </div>
      <div class="modal-section" *ngIf="selectedEvent.aboutEvent" style="padding: 8px 18px 4px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Event Description</label>
        <p style="font-size: 12px; color: #222; font-weight: 700; margin: 0;">{{ selectedEvent.aboutEvent }}</p>
      </div>
      <div class="modal-section" *ngIf="selectedEvent.companyDetails?.length" style="padding: 8px 18px 4px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Associated Companies</label>
        <div class="companies" style="display: flex; flex-wrap: wrap; gap: 8px;">
          <img *ngFor="let comp of selectedEvent.companyDetails" [src]="comp.logo" [alt]="comp.companyName" style="height: 24px; width: 24px; border-radius: 4px;" />
        </div>
      </div>
      <div class="modal-section" *ngIf="getFilteredEligibleCourses(selectedEvent).length" style="padding: 8px 18px 4px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Eligible Courses</label>
        <p style="font-size: 12px; color: #222; font-weight: 700; margin: 0;">{{ getFilteredEligibleCourses(selectedEvent).join(', ') }}</p>
      </div>
      <div class="modal-section" *ngIf="selectedEvent.eligibleCriteria" style="padding: 8px 18px 4px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Eligibility Criteria</label>
        <p style="font-size: 12px; color: #222; font-weight: 700; margin: 0;">{{ selectedEvent.eligibleCriteria }}</p>
      </div>
      <div class="modal-section" *ngIf="getFilteredSelectionProcess(selectedEvent)?.length" style="padding: 8px 18px 4px 18px; margin-bottom: 2px;">
        <label style="color: #757575; font-size: 12px; font-weight: 400;">Selection Process</label>
        <div class="badges" style="display: flex; flex-wrap: wrap; gap: 6px;">
          <span *ngFor="let round of selectedEvent.selectionProcess" class="badge" style="font-size: 11px; padding: 2px 8px; border-radius: 8px; background: #f3f4f6; color: #222;">
            <ng-container [ngSwitch]="round">
              <img *ngSwitchCase="'Aptitude test'" src="assets/icons/selection-icon.png" alt="Aptitude" style="height: 14px; width: 14px; margin-right: 2px;" />
              <img *ngSwitchCase="'Technical interview'" src="assets/icons/selection-icon.jpg" alt="Technical" style="height: 14px; width: 14px; margin-right: 2px;" />
              <img *ngSwitchCase="'HR interview'" src="assets/icons/selection-icon.jpg" alt="HR" style="height: 14px; width: 14px; margin-right: 2px;" />
            </ng-container>
            {{ round }}
          </span>
        </div>
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 10px; padding: 8px 18px 8px 18px; margin-top: 6px;">
        <button class="update-btn" (click)="onUpdateEvent(selectedEvent)" style="height: 36px; width: 176px; font-size: 14px; font-weight: 400; padding: 8px 14px; border-radius: 8px;">Update Event Details</button>
        <button class="close-btn-plain" (click)="closeEventDetails()" style="height: 36px; width: 68px; font-size: 14px; font-weight: 400; padding: 0 12px; border-radius: 8px; border: 1px solid #D1D1D6; background: #fff;">Close</button>
      </div>
    </div>
  </div>
</div>
